/*! For license information please see background.bundle.js.LICENSE.txt */
(()=>{"use strict";const e="0.15.0";let t,r,n,o,s,i,a,c,u,l=!1,f=null,h=null,d=null,p=null;class y{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}t||function(e,y={auto:!1}){if(l)throw new Error(`you must \`import 'groq-sdk/shims/${e.kind}'\` before importing anything else from groq-sdk`);if(t)throw new Error(`can't \`import 'groq-sdk/shims/${e.kind}'\` after \`import 'groq-sdk/shims/${t}'\``);l=y.auto,t=e.kind,r=e.fetch,f=e.Request,h=e.Response,d=e.Headers,n=e.FormData,p=e.Blob,o=e.File,s=e.ReadableStream,i=e.getMultipartRequestOptions,a=e.getDefaultAgent,c=e.fileFromPath,u=e.isFsReadStream}(function({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import … from 'groq-sdk'`:\n- `import 'groq-sdk/shims/node'` (if you're running on Node)\n- `import 'groq-sdk/shims/web'` (otherwise)\n";let r,n,o,s;try{r=fetch,n=Request,o=Response,s=Headers}catch(e){throw new Error(`this environment is missing the following Web Fetch API type: ${e.message}. ${t}`)}return{kind:"web",fetch:r,Request:n,Response:o,Headers:s,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new y(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/groq/groq-typescript#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0});class m extends Error{}class g extends m{constructor(e,t,r,n){super(`${g.makeMessage(e,t,r)}`),this.status=e,this.headers=n,this.error=t}static makeMessage(e,t,r){const n=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,r,n){if(!e||!n)return new b({message:r,cause:ne(t)});const o=t;return 400===e?new x(e,o,r,n):401===e?new E(e,o,r,n):403===e?new R(e,o,r,n):404===e?new S(e,o,r,n):409===e?new k(e,o,r,n):422===e?new A(e,o,r,n):429===e?new L(e,o,r,n):e>=500?new P(e,o,r,n):new g(e,o,r,n)}}class w extends g{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class b extends g{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class v extends b{constructor({message:e}={}){super({message:e??"Request timed out."})}}class x extends g{}class E extends g{}class R extends g{}class S extends g{}class k extends g{}class A extends g{}class L extends g{}class P extends g{}class q{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;const n=new _;return new q((async function*(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const r of async function*(){if(!e.body)throw t.abort(),new m("Attempted to iterate over a response with no body");const r=new I,o=O(e.body);for await(const e of o)for(const t of r.decode(e)){const e=n.decode(t);e&&(yield e)}for(const e of r.flush()){const t=n.decode(e);t&&(yield t)}}())if(!o)if(r.data.startsWith("[DONE]"))o=!0;else if(null===r.event||"error"===r.event){let e;try{e=JSON.parse(r.data)}catch(e){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),e}if(e&&e.error)throw new g(e.error.status_code,e.error,e.error.message,void 0);yield e}o=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{o||t.abort()}}),t)}static fromReadableStream(e,t){let r=!1;return new q((async function*(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const t of async function*(){const t=new I,r=O(e);for await(const e of r)for(const r of t.decode(e))yield r;for(const e of t.flush())yield e}())n||t&&(yield JSON.parse(t));n=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{n||t.abort()}}),t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),n=n=>({next:()=>{if(0===n.length){const n=r.next();e.push(n),t.push(n)}return n.shift()}});return[new q((()=>n(e)),this.controller),new q((()=>n(t)),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new s({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:n,done:o}=await t.next();if(o)return e.close();const s=r.encode(JSON.stringify(n)+"\n");e.enqueue(s)}catch(t){e.error(t)}},async cancel(){await(t.return?.())}})}}class _{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=function(e){const t=e.indexOf(":");return-1!==t?[e.substring(0,t),":",e.substring(t+1)]:[e,"",""]}(e);return n.startsWith(" ")&&(n=n.substring(1)),"event"===t?this.event=n:"data"===t&&this.data.push(n),null}}class I{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const r=I.NEWLINE_CHARS.has(t[t.length-1]||"");let n=t.split(I.NEWLINE_REGEXP);return 1!==n.length||r?(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),r||(this.buffer=[n.pop()||""]),n):(this.buffer.push(n[0]),[])}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if("undefined"!=typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new m(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new m(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new m("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}function O(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}I.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","","","","","\u2028","\u2029"]),I.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;const T=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,C=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&$(e),$=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function j(e,t,r){if(e=await e,C(e))return e;if(T(e)){const n=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const s=$(n)?[await n.arrayBuffer()]:[n];return new o(s,t,r)}const n=await async function(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if($(e))t.push(await e.arrayBuffer());else{if(!U(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){return`[${Object.getOwnPropertyNames(e).map((e=>`"${e}"`)).join(", ")}]`}(e)}`);for await(const r of e)t.push(r)}return t}(e);if(t||(t=function(e){return D(e.name)||D(e.filename)||D(e.path)?.split(/[\\/]/).pop()}(e)??"unknown_file"),!r?.type){const e=n[0]?.type;"string"==typeof e&&(r={...r,type:e})}return new o(n,t,r)}const D=e=>"string"==typeof e?e:"undefined"!=typeof Buffer&&e instanceof Buffer?String(e):void 0,U=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],N=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],B=async e=>{const t=await G(e.body);return i(t,e)},G=async e=>{const t=new n;return await Promise.all(Object.entries(e||{}).map((([e,r])=>X(t,e,r)))),t},X=async(e,t,r)=>{if(void 0!==r){if(null==r)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)e.append(t,String(r));else if((e=>C(e)||T(e)||u(e))(r)){const n=await j(r);e.append(t,n)}else if(Array.isArray(r))await Promise.all(r.map((r=>X(e,t+"[]",r))));else{if("object"!=typeof r)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`);await Promise.all(Object.entries(r).map((([r,n])=>X(e,`${t}[${r}]`,n))))}}};async function F(e){const{response:t}=e;if(e.options.stream)return ie("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):q.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const r=t.headers.get("content-type");if(r?.includes("application/json")||r?.includes("application/vnd.api+json")){const e=await t.json();return ie("response",t.status,t.url,t.headers,e),e}const n=await t.text();return ie("response",t.status,t.url,t.headers,n),n}class M extends Promise{constructor(e,t=F){super((e=>{e(null)})),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new M(this.responsePromise,(async t=>e(await this.parseResponse(t),t)))}asResponse(){return this.responsePromise.then((e=>e.response))}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class K{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e4,httpAgent:o,fetch:s}){this.baseURL=e,this.maxRetries=re("maxRetries",t),this.timeout=re("timeout",n),this.httpAgent=o,this.fetch=s??r}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Q(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${ae()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then((async r=>{const n=r&&$(r?.body)?new DataView(await r.body.arrayBuffer()):r?.body instanceof DataView?r.body:r?.body instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r?.body)?new DataView(r.body.buffer):r?.body;return{method:e,path:t,...r,body:n}})))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){const{method:r,path:n,query:o,headers:s={}}=e,i=ArrayBuffer.isView(e.body)||e.__binaryRequest&&"string"==typeof e.body?e.body:N(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,c=this.calculateContentLength(i),u=this.buildURL(n,o);"timeout"in e&&re("timeout",e.timeout);const l=e.timeout??this.timeout,f=e.httpAgent??this.httpAgent??a(u),h=l+1e3;return"number"==typeof f?.options?.timeout&&h>(f.options.timeout??0)&&(f.options.timeout=h),this.idempotencyHeader&&"get"!==r&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey),{req:{method:r,...i&&{body:i},headers:this.buildHeaders({options:e,headers:s,contentLength:c,retryCount:t}),...f&&{agent:f},signal:e.signal??null},url:u,timeout:l}}buildHeaders({options:e,headers:r,contentLength:n,retryCount:o}){const s={};n&&(s["content-length"]=n);const i=this.defaultHeaders(e);return se(s,i),se(s,r),N(e.body)&&"node"!==t&&delete s["content-type"],void 0===ce(i,"x-stainless-retry-count")&&void 0===ce(r,"x-stainless-retry-count")&&(s["x-stainless-retry-count"]=String(o)),this.validateHeaders(s,r),s}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map((e=>[...e]))):{...e}:{}}makeStatusError(e,t,r,n){return g.generate(e,t,r,n)}request(e,t=null){return new M(this.makeRequest(e,t))}async makeRequest(e,t){const r=await e,n=r.maxRetries??this.maxRetries;null==t&&(t=n),await this.prepareOptions(r);const{req:o,url:s,timeout:i}=this.buildRequest(r,{retryCount:n-t});if(await this.prepareRequest(o,{url:s,options:r}),ie("request",s,r,o.headers),r.signal?.aborted)throw new w;const a=new AbortController,c=await this.fetchWithTimeout(s,o,i,a).catch(ne);if(c instanceof Error){if(r.signal?.aborted)throw new w;if(t)return this.retryRequest(r,t);if("AbortError"===c.name)throw new v;throw new b({cause:c})}const u=H(c.headers);if(!c.ok){if(t&&this.shouldRetry(c))return ie(`response (error; retrying, ${t} attempts remaining)`,c.status,s,u),this.retryRequest(r,t,u);const e=await c.text().catch((e=>ne(e).message)),n=Y(e),o=n?void 0:e;throw ie(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,c.status,s,u,o),this.makeStatusError(c.status,n,o,u)}return{response:c,options:r,controller:a}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new W(this,r,e)}buildURL(e,t){const r=ee(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return function(e){if(!e)return!0;for(const t in e)return!1;return!0}(n)||(t={...n,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter((([e,t])=>void 0!==t)).map((([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new m(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)})).join("&")}async fetchWithTimeout(e,t,r,n){const{signal:o,...s}=t||{};o&&o.addEventListener("abort",(()=>n.abort()));const i=setTimeout((()=>n.abort()),r),a={signal:n.signal,...s};return a.method&&(a.method=a.method.toUpperCase()),this.fetch.call(void 0,e,a).finally((()=>{clearTimeout(i)}))}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,r){let n;const o=r?.["retry-after-ms"];if(o){const e=parseFloat(o);Number.isNaN(e)||(n=e)}const s=r?.["retry-after"];if(s&&!n){const e=parseFloat(s);n=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}if(!(n&&0<=n&&n<6e4)){const r=e.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,r)}return await te(n),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const r=t-e;return Math.min(.5*Math.pow(2,r),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${e}`}}new WeakMap,Symbol.asyncIterator;class W extends M{constructor(e,t,r){super(t,(async t=>new r(e,t.response,await F(t),t.options)))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const H=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),V=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",J=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let z;const Q=()=>z??(z=(()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e,"X-Stainless-OS":J(Deno.build.os),"X-Stainless-Arch":V(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e,"X-Stainless-OS":J(process.platform),"X-Stainless-Arch":V(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:r}of e){const e=r.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),Y=e=>{try{return JSON.parse(e)}catch(e){return}},Z=/^[a-z][a-z0-9+.-]*:/i,ee=e=>Z.test(e),te=e=>new Promise((t=>setTimeout(t,e))),re=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new m(`${e} must be an integer`);if(t<0)throw new m(`${e} must be a positive integer`);return t},ne=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},oe=e=>"undefined"!=typeof process?process.env?.[e]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(e)?.trim():void 0;function se(e,t){for(const o in t){if(r=t,n=o,!Object.prototype.hasOwnProperty.call(r,n))continue;const s=o.toLowerCase();if(!s)continue;const i=t[o];null===i?delete e[s]:void 0!==i&&(e[s]=i)}var r,n}function ie(e,...t){"undefined"!=typeof process&&"true"===process?.env?.DEBUG&&console.log(`Groq:DEBUG:${e}`,...t)}const ae=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),ce=(e,t)=>{const r=t.toLowerCase();if((e=>"function"==typeof e?.get)(e)){const n=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,((e,t,r)=>t+r.toUpperCase()));for(const o of[t,r,t.toUpperCase(),n]){const t=e.get(o);if(t)return t}}for(const[n,o]of Object.entries(e))if(n.toLowerCase()===r)return Array.isArray(o)?(o.length<=1||console.warn(`Received ${o.length} entries for the ${t} header, using the first entry.`),o[0]):o};class ue{constructor(e){this._client=e}}class le extends ue{}class fe extends ue{create(e,t){return this._client.post("/openai/v1/chat/completions",{body:e,...t,stream:e.stream??!1})}}class he extends ue{constructor(){super(...arguments),this.completions=new fe(this._client)}}he.Completions=fe;class de extends ue{create(e,t){return this._client.post("/openai/v1/embeddings",{body:e,...t})}}class pe extends ue{create(e,t){return this._client.post("/openai/v1/audio/transcriptions",B({body:e,...t}))}}class ye extends ue{create(e,t){return this._client.post("/openai/v1/audio/translations",B({body:e,...t}))}}class me extends ue{constructor(){super(...arguments),this.transcriptions=new pe(this._client),this.translations=new ye(this._client)}}me.Transcriptions=pe,me.Translations=ye;class ge extends ue{retrieve(e,t){return this._client.get(`/openai/v1/models/${e}`,t)}list(e){return this._client.get("/openai/v1/models",e)}delete(e,t){return this._client.delete(`/openai/v1/models/${e}`,t)}}class we extends ue{create(e,t){return this._client.post("/openai/v1/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/openai/v1/batches/${e}`,t)}list(e){return this._client.get("/openai/v1/batches",e)}}class be extends ue{create(e,t){return this._client.post("/openai/v1/files",B({body:e,...t}))}list(e){return this._client.get("/openai/v1/files",e)}delete(e,t){return this._client.delete(`/openai/v1/files/${e}`,t)}content(e,t){return this._client.get(`/openai/v1/files/${e}/content`,t)}info(e,t){return this._client.get(`/openai/v1/files/${e}`,t)}}var ve;class xe extends K{constructor({baseURL:e=oe("GROQ_BASE_URL"),apiKey:t=oe("GROQ_API_KEY"),...r}={}){if(void 0===t)throw new m("The GROQ_API_KEY environment variable is missing or empty; either provide it, or instantiate the Groq client with an apiKey option, like new Groq({ apiKey: 'My API Key' }).");const n={apiKey:t,...r,baseURL:e||"https://api.groq.com"};if(!n.dangerouslyAllowBrowser&&"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator)throw new m("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Groq({ apiKey, dangerouslyAllowBrowser: true })");super({baseURL:n.baseURL,timeout:n.timeout??6e4,httpAgent:n.httpAgent,maxRetries:n.maxRetries,fetch:n.fetch}),this.completions=new le(this),this.chat=new he(this),this.embeddings=new de(this),this.audio=new me(this),this.models=new ge(this),this.batches=new we(this),this.files=new be(this),this._options=n,this.apiKey=t}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}ve=xe,xe.Groq=ve,xe.DEFAULT_TIMEOUT=6e4,xe.GroqError=m,xe.APIError=g,xe.APIConnectionError=b,xe.APIConnectionTimeoutError=v,xe.APIUserAbortError=w,xe.NotFoundError=S,xe.ConflictError=k,xe.RateLimitError=L,xe.BadRequestError=x,xe.AuthenticationError=E,xe.InternalServerError=P,xe.PermissionDeniedError=R,xe.UnprocessableEntityError=A,xe.toFile=j,xe.fileFromPath=c,xe.Completions=le,xe.Chat=he,xe.Embeddings=de,xe.Audio=me,xe.Models=ge,xe.Batches=we,xe.Files=be;const Ee=xe;function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Se(){Se=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var s=t&&t.prototype instanceof g?t:g,i=Object.create(s.prototype),a=new _(n||[]);return o(i,"_invoke",{value:A(e,r,a)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",y="completed",m={};function g(){}function w(){}function b(){}var v={};u(v,i,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(I([])));E&&E!==r&&n.call(E,i)&&(v=E);var R=b.prototype=g.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,s,i,a){var c=f(e[o],e,s);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Re(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,a)}),(function(e){r("throw",e,i,a)})):t.resolve(l).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,a)}))}a(c.arg)}var s;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return s=s?s.then(o,o):o()}})}function A(t,r,n){var o=h;return function(s,i){if(o===p)throw Error("Generator is already running");if(o===y){if("throw"===s)throw i;return{value:e,done:!0}}for(n.method=s,n.arg=i;;){var a=n.delegate;if(a){var c=L(a,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var s=f(o,t.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,m;var i=s.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function q(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(Re(t)+" is not iterable")}return w.prototype=b,o(R,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:w,configurable:!0}),w.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(R),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,a,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,s){void 0===s&&(s=Promise);var i=new k(l(e,r,n,o),s);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(R),u(R,c,"Generator"),u(R,i,(function(){return this})),u(R,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return a.type="throw",a.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),q(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;q(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function ke(e,t,r,n,o,s,i){try{var a=e[s](i),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,o)}function Ae(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){ke(s,n,o,i,a,"next",e)}function a(e){ke(s,n,o,i,a,"throw",e)}i(void 0)}))}}var Le,Pe=null,qe="";function _e(){return Ie.apply(this,arguments)}function Ie(){return(Ie=Ae(Se().mark((function e(){var t;return Se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Initializing Groq SDK..."),e.next=3,chrome.storage.sync.get(["apiKey"]);case 3:if(t=e.sent,console.log("Retrieved API key from chrome.storage:",t.apiKey),t.apiKey){e.next=8;break}return console.error("Groq API key is not set."),e.abrupt("return");case 8:Le=new Ee({apiKey:t.apiKey}),console.log("Groq SDK initialized successfully.");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(){return(Oe=Ae(Se().mark((function e(t,r){var n,o,s,i,a,c,u;return Se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Updating textbox with LLM suggestions..."),qe=t.textBoxContent,e.next=4,chrome.storage.sync.get();case 4:return n=e.sent,e.next=7,chrome.storage.local.get();case 7:return o=e.sent,s=o.context,console.log("Retrieved settings from chrome.storage:",n),console.log("Retrieved context from chrome.storage.local:",s),i="\n  TITLE: ".concat(s.title,".\n  DESCRIPTION: ").concat(s.description,".\n  PAGE TEXT: ").concat(s.bodyText),a=[{role:"system",content:"You are a helpful assistant that uses the context of the webpage and the user's input to provide the most logical and useful completion of the user's text. Provide only the completion, no explanations or other comments. Style your output as if the user were typing it."},{role:"user",content:"The webpage contains the following information:\n### ".concat(i,"\n###\n\nThe user wrote: ###\n").concat(qe,"\n###\n")}],console.log("Constructed messages for Groq API:",a),e.prev=14,e.next=17,Te(n,a);case 17:c=e.sent,console.log("API Response:",c),u=c.choices[0].message.content,chrome.tabs.sendMessage(r.tab.id,{type:"COMPLETION_RECEIVED",completion:u}),console.log("Completion sent to content script:",u),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(14),console.error("Error in updateTextbox:",e.t0),chrome.tabs.sendMessage(r.tab.id,{type:"COMPLETION_ERROR",error:e.t0.message});case 28:case"end":return e.stop()}}),e,null,[[14,24]])})))).apply(this,arguments)}function Te(e,t){return Ce.apply(this,arguments)}function Ce(){return(Ce=Ae(Se().mark((function e(t,r){var n;return Se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Calling Groq API..."),Le){e.next=7;break}return console.log("Groq SDK not initialized. Initializing..."),e.next=5,_e();case 5:if(Le){e.next=7;break}throw new Error("Groq API key is not set.");case 7:return e.prev=7,e.next=10,Le.chat.completions.create({model:"qwen-2.5-32b",messages:r,temperature:parseFloat(t.modelTemp)});case 10:return n=e.sent,console.log("Groq API call successful:",n),e.abrupt("return",n);case 15:if(e.prev=15,e.t0=e.catch(7),console.error("Groq API call failed:",e.t0),!e.t0.message.includes("API key")){e.next=22;break}throw new Error("Invalid API key. Please check your API key in the extension options.");case 22:if(!e.t0.message.includes("network")){e.next=26;break}throw new Error("Network error. Please check your internet connection.");case 26:throw new Error("API request failed: ".concat(e.t0.message));case 27:case"end":return e.stop()}}),e,null,[[7,15]])})))).apply(this,arguments)}chrome.storage.sync.set({apiKey:"ENTER API KEY HERE"},(function(){console.log("API key saved to chrome.storage.sync.")})),_e(),chrome.runtime.onMessage.addListener((function(e,t){console.log("Message received from content script:",e),"TEXT_BOX_UPDATED"===e.type?(Pe&&clearTimeout(Pe),Pe=setTimeout((function(){!function(e,t){Oe.apply(this,arguments)}(e,t)}),300)):"STORE_CONTEXT"===e.type&&chrome.storage.local.set({context:e.context},(function(){console.log("Context saved to chrome.storage.local:",e.context)}))})),chrome.storage.onChanged.addListener((function(e,t){console.log("Change detected in chrome.storage:",e),"sync"===t&&e.apiKey&&(console.log("API key updated. Reinitializing Groq SDK..."),_e())}))})();
